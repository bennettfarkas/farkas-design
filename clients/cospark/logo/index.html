<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CoSpark — Logo Assets</title>
    <meta name="description" content="CoSpark logo assets — download in SVG and PNG across all variants and colors.">
    <link rel="icon" type="image/svg+xml" href="../favicon.svg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=DM+Sans:opsz,wght@9..40,300;9..40,400;9..40,500;9..40,600;9..40,700;9..40,900&family=Source+Serif+4:opsz,wght@8..60,300;8..60,400;8..60,600;8..60,700&display=swap">
    <link rel="stylesheet" href="../layout.css">
    <link rel="stylesheet" href="../brand.css">
    <style>
        /* Logo sections */
        .logo-section {
            padding: 4rem 0;
            border-bottom: 1px solid var(--border);
        }

        .logo-section:last-of-type {
            border-bottom: none;
        }

        .variants {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 1.25rem;
        }

        .variant {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .card {
            border-radius: 12px;
            padding: 3rem 2rem;
            display: grid;
            place-items: center;
            min-height: 200px;
            position: relative;
        }

        .card-light {
            background: var(--slate-50);
            border: 1px solid var(--slate-100);
        }

        .card-copper {
            background: var(--copper-50);
            border: 1px solid var(--copper-100);
        }

        .card-dark {
            background: var(--slate-900);
        }

        .card img {
            max-width: 80%;
            max-height: 100px;
            object-fit: contain;
        }

        .card-icon img {
            max-height: 80px;
            max-width: 60%;
        }

        .card-label {
            position: absolute;
            top: 0.75rem;
            left: 1rem;
            font-size: var(--text-label);
            font-weight: var(--weight-medium);
            text-transform: uppercase;
            letter-spacing: var(--tracking-label);
            line-height: var(--leading-label);
        }

        .card-light .card-label { color: var(--color-body); }
        .card-copper .card-label { color: var(--copper-300); }
        .card-dark .card-label { color: var(--slate-600); }

        .download-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.5rem;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.35rem;
            padding: 0.45rem 0.85rem;
            font-family: var(--font-sans);
            font-size: var(--text-caption);
            font-weight: var(--weight-medium);
            text-decoration: none;
            border-radius: 6px;
            border: 1px solid var(--border-strong);
            color: var(--color-subtle);
            background: var(--surface-overlay);
            cursor: pointer;
            transition: all 0.15s ease;
        }

        .btn:hover {
            border-color: var(--color-body);
            color: var(--color-heading);
        }

        .btn svg {
            width: 13px;
            height: 13px;
            flex-shrink: 0;
        }

        /* Guideline visuals */
        .guideline-visuals {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.25rem;
            margin-bottom: 2rem;
        }

        .guideline-visual {
            display: flex;
            flex-direction: column;
            background: var(--slate-50);
            border: 1px solid var(--slate-100);
            border-radius: 12px;
            overflow: hidden;
        }

        .visual-demo {
            flex: 1;
            padding: 3rem 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .visual-caption {
            padding: 1rem 1.5rem;
            border-top: 1px solid var(--slate-100);
            background: var(--white);
        }

        .visual-caption h3 {
            font-size: var(--text-caption);
            font-weight: var(--weight-medium);
            text-transform: uppercase;
            letter-spacing: var(--tracking-caption);
            line-height: var(--leading-caption);
            color: var(--slate-800);
            margin-bottom: 0.35rem;
        }

        .visual-caption p {
            font-size: var(--text-small);
            color: var(--slate-400);
            line-height: var(--leading-small);
        }

        /* Clear space */
        .clearspace-zone {
            position: relative;
            padding: 28px;
            border: 1.5px dashed var(--copper-300);
            border-radius: 4px;
        }

        .clearspace-zone img {
            display: block;
            height: 32px;
            width: auto;
        }

        .dim {
            position: absolute;
            width: 28px;
            height: 28px;
            background: rgba(212, 121, 47, 0.08);
            border: 1px solid rgba(212, 121, 47, 0.15);
            border-radius: 2px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: var(--font-sans);
            font-size: 9px;
            font-weight: var(--weight-semibold);
            color: var(--copper-500);
            letter-spacing: 0.05em;
        }

        .dim-h {
            top: 0;
            left: 50%;
            transform: translateX(-50%);
        }

        .dim-v {
            left: 0;
            top: 50%;
            transform: translateY(-50%);
        }

        /* Clear space key */
        .clearspace-key {
            position: absolute;
            right: 5px;
            top: 28px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.3rem;
        }

        .clearspace-key-ruler {
            position: relative;
            border-left: 1px solid var(--copper-300);
        }

        .clearspace-key-ruler::before,
        .clearspace-key-ruler::after {
            content: '';
            position: absolute;
            left: -3px;
            width: 5px;
            height: 1px;
            background: var(--copper-300);
        }

        .clearspace-key-ruler::before { top: 0; }
        .clearspace-key-ruler::after { bottom: 0; }

        .clearspace-key-label {
            font-family: var(--font-sans);
            font-size: 9px;
            font-weight: var(--weight-semibold);
            color: var(--copper-500);
            letter-spacing: 0.05em;
        }

        /* Minimum size */
        .minsize-demo {
            display: flex;
            align-items: flex-end;
            gap: 3rem;
        }

        .minsize-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
        }

        .minsize-item img {
            display: block;
        }

        .minsize-ruler {
            position: relative;
            border-top: 1px solid var(--copper-300);
        }

        .minsize-ruler::before,
        .minsize-ruler::after {
            content: '';
            position: absolute;
            top: -3px;
            width: 1px;
            height: 5px;
            background: var(--copper-300);
        }

        .minsize-ruler::before { left: 0; }
        .minsize-ruler::after { right: 0; }

        .minsize-label {
            font-family: var(--font-sans);
            font-size: 9px;
            font-weight: var(--weight-medium);
            color: var(--copper-500);
            letter-spacing: 0.05em;
        }

        /* Guidelines */
        .guidelines {
            padding: 4rem 0;
            border-top: 1px solid var(--border);
        }

        .donts-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
        }

        .dont-card {
            background: var(--surface-raised);
            border-radius: 10px;
            padding: 1.5rem 1rem 1rem;
            text-align: center;
        }

        .dont-card .dont-icon {
            width: 100%;
            height: 48px;
            margin: 0 auto 0.75rem;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .dont-card .dont-icon img {
            height: 20px;
            width: auto;
        }

        .dont-card .dont-icon::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 44px;
            height: 44px;
            border: 2px solid var(--error);
            border-radius: 50%;
        }

        .dont-card .dont-icon .slash {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 44px;
            height: 2px;
            background: var(--error);
            transform: translate(-50%, -50%) rotate(-45deg);
        }

        .dont-card p {
            font-size: var(--text-caption);
            color: var(--color-body);
            line-height: var(--leading-caption);
        }

        /* Download all */
        .download-all {
            padding: 3rem 0 4rem;
            text-align: center;
            border-top: 1px solid var(--border);
        }

        .btn-primary {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.85rem 2rem;
            font-family: var(--font-sans);
            font-size: var(--text-small);
            font-weight: var(--weight-medium);
            color: var(--white);
            background: var(--slate-800);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.15s ease;
        }

        .btn-primary:hover {
            background: var(--slate-900);
        }

        [data-theme="dark"] .btn-primary {
            color: var(--slate-950);
            background: var(--slate-50);
        }
        [data-theme="dark"] .btn-primary:hover {
            background: var(--slate-200);
        }

        .btn-primary svg {
            width: 16px;
            height: 16px;
        }

        .download-all p {
            margin-top: 0.75rem;
            font-size: var(--text-small);
            color: var(--color-body);
            line-height: var(--leading-small);
        }

        [data-theme="dark"] .swatch-card:hover,
        [data-theme="dark"] .swatch-card:active {
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
        }

        /* Responsive */
        @media (max-width: 900px) {
            .download-group { grid-template-columns: 1fr; }
        }

        @media (max-width: 640px) {
            .variants { grid-template-columns: 1fr; }
            .download-group { grid-template-columns: 1fr 1fr; }
            .guideline-visuals { grid-template-columns: 1fr; }
            .donts-grid { grid-template-columns: 1fr 1fr; }
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
    <script>if(localStorage.getItem('theme')==='dark')document.documentElement.setAttribute('data-theme','dark')</script>
</head>
<body>

    <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" style="display:none">
        <symbol id="icon-download" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
            <path d="M8 2v8m0 0L5 7m3 3l3-3M3 12h10"/>
        </symbol>
    </svg>

    <!-- Header -->
    <header class="header">
        <a class="back" href="../index.html">
            <svg aria-hidden="true" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M10 3L5 8l5 5"/></svg>
            All assets
        </a>
        <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle dark mode">
            <svg class="icon-moon" aria-hidden="true" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
            <svg class="icon-sun" aria-hidden="true" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="5"/><path d="M12 1v2m0 18v2M4.22 4.22l1.42 1.42m12.72 12.72l1.42 1.42M1 12h2m18 0h2M4.22 19.78l1.42-1.42m12.72-12.72l1.42-1.42"/></svg>
        </button>
        <div class="header-logo">
            <img src="../wordmark.svg" alt="CoSpark">
        </div>
        <h1>Logo</h1>
    </header>

    <main class="content">

        <!-- Logo (horizontal) -->
        <div class="logo-section">
            <div class="section-header">
                <h2>Logo</h2>
                <p>Primary horizontal lockup. Use for headers, marketing materials, and presentations.</p>
            </div>
            <div class="variants">
                <div class="variant">
                    <div class="card card-light">
                        <span class="card-label">Slate</span>
                        <img src="logo-slate.svg" alt="CoSpark logo in slate">
                    </div>
                    <div class="download-group">
                        <a class="btn" href="logo-slate.svg" download="cospark-logo-slate.svg">
                            <svg><use href="#icon-download"/></svg>
                            SVG Slate
                        </a>
                        <button class="btn" onclick="downloadPng('logo-slate.svg', 'cospark-logo-slate.png')">
                            <svg><use href="#icon-download"/></svg>
                            PNG Slate
                        </button>
                    </div>
                </div>
                <div class="variant">
                    <div class="card card-copper">
                        <span class="card-label">Copper</span>
                        <img src="logo-copper.svg" alt="CoSpark logo in copper">
                    </div>
                    <div class="download-group">
                        <a class="btn" href="logo-copper.svg" download="cospark-logo-copper.svg">
                            <svg><use href="#icon-download"/></svg>
                            SVG Copper
                        </a>
                        <button class="btn" onclick="downloadPng('logo-copper.svg', 'cospark-logo-copper.png')">
                            <svg><use href="#icon-download"/></svg>
                            PNG Copper
                        </button>
                    </div>
                </div>
                <div class="variant">
                    <div class="card card-dark">
                        <span class="card-label">White</span>
                        <img src="logo-white.svg" alt="CoSpark logo in white">
                    </div>
                    <div class="download-group">
                        <a class="btn" href="logo-white.svg" download="cospark-logo-white.svg">
                            <svg><use href="#icon-download"/></svg>
                            SVG White
                        </a>
                        <button class="btn" onclick="downloadPng('logo-white.svg', 'cospark-logo-white.png')">
                            <svg><use href="#icon-download"/></svg>
                            PNG White
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Logo Stacked -->
        <div class="logo-section">
            <div class="section-header">
                <h2>Logo Stacked</h2>
                <p>Vertical lockup for square placements — social profiles, app icons, and compact spaces.</p>
            </div>
            <div class="variants">
                <div class="variant">
                    <div class="card card-light">
                        <span class="card-label">Slate</span>
                        <img src="logo-stacked-slate.svg" alt="CoSpark logo stacked in slate">
                    </div>
                    <div class="download-group">
                        <a class="btn" href="logo-stacked-slate.svg" download="cospark-logo-stacked-slate.svg">
                            <svg><use href="#icon-download"/></svg>
                            SVG Slate
                        </a>
                        <button class="btn" onclick="downloadPng('logo-stacked-slate.svg', 'cospark-logo-stacked-slate.png')">
                            <svg><use href="#icon-download"/></svg>
                            PNG Slate
                        </button>
                    </div>
                </div>
                <div class="variant">
                    <div class="card card-copper">
                        <span class="card-label">Copper</span>
                        <img src="logo-stacked-copper.svg" alt="CoSpark logo stacked in copper">
                    </div>
                    <div class="download-group">
                        <a class="btn" href="logo-stacked-copper.svg" download="cospark-logo-stacked-copper.svg">
                            <svg><use href="#icon-download"/></svg>
                            SVG Copper
                        </a>
                        <button class="btn" onclick="downloadPng('logo-stacked-copper.svg', 'cospark-logo-stacked-copper.png')">
                            <svg><use href="#icon-download"/></svg>
                            PNG Copper
                        </button>
                    </div>
                </div>
                <div class="variant">
                    <div class="card card-dark">
                        <span class="card-label">White</span>
                        <img src="logo-stacked-white.svg" alt="CoSpark logo stacked in white">
                    </div>
                    <div class="download-group">
                        <a class="btn" href="logo-stacked-white.svg" download="cospark-logo-stacked-white.svg">
                            <svg><use href="#icon-download"/></svg>
                            SVG White
                        </a>
                        <button class="btn" onclick="downloadPng('logo-stacked-white.svg', 'cospark-logo-stacked-white.png')">
                            <svg><use href="#icon-download"/></svg>
                            PNG White
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Wordmark -->
        <div class="logo-section">
            <div class="section-header">
                <h2>Wordmark</h2>
                <p>Text-only mark for editorial contexts, footers, and co-branding where the icon isn't needed.</p>
            </div>
            <div class="variants">
                <div class="variant">
                    <div class="card card-light">
                        <span class="card-label">Slate</span>
                        <img src="wordmark-slate.svg" alt="CoSpark wordmark in slate">
                    </div>
                    <div class="download-group">
                        <a class="btn" href="wordmark-slate.svg" download="cospark-wordmark-slate.svg">
                            <svg><use href="#icon-download"/></svg>
                            SVG Slate
                        </a>
                        <button class="btn" onclick="downloadPng('wordmark-slate.svg', 'cospark-wordmark-slate.png')">
                            <svg><use href="#icon-download"/></svg>
                            PNG Slate
                        </button>
                    </div>
                </div>
                <div class="variant">
                    <div class="card card-copper">
                        <span class="card-label">Copper</span>
                        <img src="wordmark-copper.svg" alt="CoSpark wordmark in copper">
                    </div>
                    <div class="download-group">
                        <a class="btn" href="wordmark-copper.svg" download="cospark-wordmark-copper.svg">
                            <svg><use href="#icon-download"/></svg>
                            SVG Copper
                        </a>
                        <button class="btn" onclick="downloadPng('wordmark-copper.svg', 'cospark-wordmark-copper.png')">
                            <svg><use href="#icon-download"/></svg>
                            PNG Copper
                        </button>
                    </div>
                </div>
                <div class="variant">
                    <div class="card card-dark">
                        <span class="card-label">White</span>
                        <img src="wordmark-white.svg" alt="CoSpark wordmark in white">
                    </div>
                    <div class="download-group">
                        <a class="btn" href="wordmark-white.svg" download="cospark-wordmark-white.svg">
                            <svg><use href="#icon-download"/></svg>
                            SVG White
                        </a>
                        <button class="btn" onclick="downloadPng('wordmark-white.svg', 'cospark-wordmark-white.png')">
                            <svg><use href="#icon-download"/></svg>
                            PNG White
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Icon -->
        <div class="logo-section">
            <div class="section-header">
                <h2>Icon</h2>
                <p>Standalone spark mark for favicons, avatars, and small-scale applications.</p>
            </div>
            <div class="variants">
                <div class="variant">
                    <div class="card card-light card-icon">
                        <span class="card-label">Slate</span>
                        <img src="icon-slate.svg" alt="CoSpark icon in slate">
                    </div>
                    <div class="download-group">
                        <a class="btn" href="icon-slate.svg" download="cospark-icon-slate.svg">
                            <svg><use href="#icon-download"/></svg>
                            SVG Slate
                        </a>
                        <button class="btn" onclick="downloadPng('icon-slate.svg', 'cospark-icon-slate.png')">
                            <svg><use href="#icon-download"/></svg>
                            PNG Slate
                        </button>
                    </div>
                </div>
                <div class="variant">
                    <div class="card card-copper card-icon">
                        <span class="card-label">Copper</span>
                        <img src="icon-copper.svg" alt="CoSpark icon in copper">
                    </div>
                    <div class="download-group">
                        <a class="btn" href="icon-copper.svg" download="cospark-icon-copper.svg">
                            <svg><use href="#icon-download"/></svg>
                            SVG Copper
                        </a>
                        <button class="btn" onclick="downloadPng('icon-copper.svg', 'cospark-icon-copper.png')">
                            <svg><use href="#icon-download"/></svg>
                            PNG Copper
                        </button>
                    </div>
                </div>
                <div class="variant">
                    <div class="card card-dark card-icon">
                        <span class="card-label">White</span>
                        <img src="icon-white.svg" alt="CoSpark icon in white">
                    </div>
                    <div class="download-group">
                        <a class="btn" href="icon-white.svg" download="cospark-icon-white.svg">
                            <svg><use href="#icon-download"/></svg>
                            SVG White
                        </a>
                        <button class="btn" onclick="downloadPng('icon-white.svg', 'cospark-icon-white.png')">
                            <svg><use href="#icon-download"/></svg>
                            PNG White
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Usage Guidelines -->
        <div class="guidelines">
            <div class="section-header">
                <h2>Usage Guidelines</h2>
                <p>Follow these rules to keep the CoSpark brand consistent across all touchpoints.</p>
            </div>

            <div class="guideline-visuals">
                <div class="guideline-visual">
                    <div class="visual-demo">
                        <div class="clearspace-zone">
                            <span class="dim dim-h">H</span>
                            <span class="dim dim-v">H</span>
                            <img src="logo-slate.svg" alt="">
                            <div class="clearspace-key">
                                <div class="clearspace-key-ruler" style="height: 28px;"></div>
                                <span class="clearspace-key-label">= H</span>
                            </div>
                        </div>
                    </div>
                    <div class="visual-caption">
                        <h3>Clear Space</h3>
                        <p>Maintain clear space equal to the spark icon height (H) on all sides. No other elements should intrude into this area.</p>
                    </div>
                </div>
                <div class="guideline-visual">
                    <div class="visual-demo">
                        <div class="minsize-demo">
                            <div class="minsize-item">
                                <img src="logo-slate.svg" alt="" style="width: 120px; height: auto;">
                                <div class="minsize-ruler" style="width: 120px;"></div>
                                <span class="minsize-label">120px min</span>
                            </div>
                            <div class="minsize-item">
                                <img src="icon-slate.svg" alt="" style="width: 24px; height: 24px;">
                                <div class="minsize-ruler" style="width: 24px;"></div>
                                <span class="minsize-label">24px min</span>
                            </div>
                        </div>
                    </div>
                    <div class="visual-caption">
                        <h3>Minimum Size</h3>
                        <p>Horizontal logo: 120px / 30mm. Icon alone can go as small as 24px.</p>
                    </div>
                </div>
            </div>

            <div class="donts">
                <h3>Don'ts</h3>
                <div class="donts-grid">
                    <div class="dont-card">
                        <div class="dont-icon">
                            <img src="logo-slate.svg" alt="" style="transform: rotate(15deg); opacity: 0.5;">
                            <span class="slash"></span>
                        </div>
                        <p>Don't rotate or skew the logo</p>
                    </div>
                    <div class="dont-card">
                        <div class="dont-icon">
                            <img src="logo-slate.svg" alt="" style="opacity: 0.25;">
                            <span class="slash"></span>
                        </div>
                        <p>Don't reduce opacity or make it transparent</p>
                    </div>
                    <div class="dont-card">
                        <div class="dont-icon">
                            <img src="logo-slate.svg" alt="" style="opacity: 0.5; filter: hue-rotate(140deg) saturate(2);">
                            <span class="slash"></span>
                        </div>
                        <p>Don't change the logo colors outside the palette</p>
                    </div>
                    <div class="dont-card">
                        <div class="dont-icon">
                            <img src="logo-slate.svg" alt="" style="transform: scaleX(1.4); opacity: 0.5;">
                            <span class="slash"></span>
                        </div>
                        <p>Don't stretch or distort the proportions</p>
                    </div>
                </div>
            </div>
        </div>


        <!-- Download All -->
        <div class="download-all">
            <button class="btn-primary" onclick="downloadAll()">
                <svg><use href="#icon-download"/></svg>
                Download All
            </button>
            <p>SVG + PNG, all variants and colors — packaged as a ZIP</p>
        </div>
    </main>

    <!-- JSZip for ZIP downloads -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

    <script>
        const SCALE = 4; // PNG render scale for high-res output

        // All logo files for ZIP bundling
        const ALL_SVGS = [
            { path: 'logo-slate.svg', name: 'cospark-logo-slate' },
            { path: 'logo-copper.svg', name: 'cospark-logo-copper' },
            { path: 'logo-white.svg', name: 'cospark-logo-white' },
            { path: 'logo-stacked-slate.svg', name: 'cospark-logo-stacked-slate' },
            { path: 'logo-stacked-copper.svg', name: 'cospark-logo-stacked-copper' },
            { path: 'logo-stacked-white.svg', name: 'cospark-logo-stacked-white' },
            { path: 'wordmark-slate.svg', name: 'cospark-wordmark-slate' },
            { path: 'wordmark-copper.svg', name: 'cospark-wordmark-copper' },
            { path: 'wordmark-white.svg', name: 'cospark-wordmark-white' },
            { path: 'icon-slate.svg', name: 'cospark-icon-slate' },
            { path: 'icon-copper.svg', name: 'cospark-icon-copper' },
            { path: 'icon-white.svg', name: 'cospark-icon-white' },
        ];

        /**
         * Render an SVG file to a PNG blob via canvas.
         */
        function svgToPngBlob(svgPath, scale) {
            return new Promise((resolve, reject) => {
                fetch(svgPath)
                    .then(r => r.text())
                    .then(svgText => {
                        const parser = new DOMParser();
                        const doc = parser.parseFromString(svgText, 'image/svg+xml');
                        const svgEl = doc.documentElement;

                        let w = parseFloat(svgEl.getAttribute('width'));
                        let h = parseFloat(svgEl.getAttribute('height'));

                        // Fallback to viewBox if width/height not set
                        if (!w || !h) {
                            const vb = svgEl.getAttribute('viewBox');
                            if (vb) {
                                const parts = vb.split(/[\s,]+/);
                                w = parseFloat(parts[2]);
                                h = parseFloat(parts[3]);
                            }
                        }

                        if (!w || !h) { reject(new Error('SVG has no width/height or viewBox')); return; }

                        const canvas = document.createElement('canvas');
                        canvas.width = w * scale;
                        canvas.height = h * scale;
                        const ctx = canvas.getContext('2d');

                        const img = new Image();
                        const blob = new Blob([svgText], { type: 'image/svg+xml;charset=utf-8' });
                        const url = URL.createObjectURL(blob);

                        img.onload = () => {
                            ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                            URL.revokeObjectURL(url);
                            canvas.toBlob(pngBlob => resolve(pngBlob), 'image/png');
                        };
                        img.onerror = reject;
                        img.src = url;
                    })
                    .catch(reject);
            });
        }

        /**
         * Download a single SVG as PNG.
         */
        async function downloadPng(svgPath, filename) {
            try {
                const blob = await svgToPngBlob(svgPath, SCALE);
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = filename;
                document.body.appendChild(a);
                a.click();
                a.remove();
                URL.revokeObjectURL(url);
            } catch (err) {
                console.error('PNG download failed:', err);
                alert('PNG generation failed. Try downloading the SVG instead.');
            }
        }

        /**
         * Download all logos as a ZIP (SVGs + PNGs).
         */
        async function downloadAll() {
            if (typeof JSZip === 'undefined') {
                alert('ZIP library failed to load. Please try again or download files individually.');
                return;
            }
            const btn = document.querySelector('.btn-primary');
            const originalHTML = btn.innerHTML;
            btn.innerHTML = '<svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" style="width:16px;height:16px;animation:spin 1s linear infinite"><circle cx="8" cy="8" r="6" stroke-dasharray="28" stroke-dashoffset="8"/></svg> Packaging…';
            btn.disabled = true;

            try {
                const zip = new JSZip();
                const svgFolder = zip.folder('svg');
                const pngFolder = zip.folder('png');

                const tasks = ALL_SVGS.map(async ({ path, name }) => {
                    // Fetch SVG
                    const svgResp = await fetch(path);
                    const svgText = await svgResp.text();
                    svgFolder.file(name + '.svg', svgText);

                    // Render PNG
                    const pngBlob = await svgToPngBlob(path, SCALE);
                    pngFolder.file(name + '.png', pngBlob);
                });

                await Promise.all(tasks);

                const zipBlob = await zip.generateAsync({ type: 'blob' });
                const url = URL.createObjectURL(zipBlob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'cospark-logos.zip';
                document.body.appendChild(a);
                a.click();
                a.remove();
                URL.revokeObjectURL(url);
            } catch (err) {
                console.error('ZIP generation failed:', err);
                alert('Something went wrong generating the ZIP. Please try downloading files individually.');
            } finally {
                btn.innerHTML = originalHTML;
                btn.disabled = false;
            }
        }
    </script>

    <script>
        function toggleTheme() {
            const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
            document.documentElement.setAttribute('data-theme', isDark ? 'light' : 'dark');
            localStorage.setItem('theme', isDark ? 'light' : 'dark');
        }
    </script>

    <script data-signature src="../../../shared/farkas-animation.js"></script>

</body>
</html>
